<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Produtos Shopee - Links de Afiliado</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 25px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        h1 {
            color: #ee4d2d;
            margin-bottom: 10px;
            font-size: 2.4rem;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        
        .shopee-logo {
            color: #ee4d2d;
            font-weight: bold;
        }
        
        .sheet-info {
            background-color: #e9f7fe;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            text-align: left;
            font-size: 0.9rem;
        }
        
        .sheet-info strong {
            color: #2c80b4;
        }
        
        .filters {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .search-box {
            flex: 1;
            min-width: 300px;
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #eee;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .search-box input:focus {
            border-color: #ee4d2d;
            outline: none;
        }
        
        .category-filter {
            min-width: 200px;
        }
        
        .category-filter select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #eee;
            border-radius: 8px;
            font-size: 1rem;
            background-color: white;
            cursor: pointer;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px 20px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .product-count {
            font-size: 1.1rem;
            color: #555;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            font-size: 1.2rem;
            color: #666;
        }
        
        .products-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .product-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            display: flex;
            flex-direction: column;
        }
        
        .product-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.12);
        }
        
        .product-image {
            height: 220px;
            width: 100%;
            object-fit: contain;
            background-color: #f9f9f9;
            padding: 15px;
        }
        
        .product-info {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }
        
        .product-title {
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 1.1rem;
            color: #222;
            line-height: 1.4;
            flex-grow: 1;
        }
        
        .product-price {
            color: #ee4d2d;
            font-size: 1.6rem;
            font-weight: bold;
            margin-bottom: 15px;
        }
        
        .product-category {
            display: inline-block;
            background-color: #f1f1f1;
            color: #666;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-bottom: 15px;
            align-self: flex-start;
        }
        
        .affiliate-link {
            display: block;
            text-align: center;
            background-color: #ee4d2d;
            color: white;
            padding: 14px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.3s;
            margin-top: auto;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            width: 100%;
        }
        
        .affiliate-link:hover {
            background-color: #d04227;
        }
        
        .affiliate-link:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            grid-column: 1 / -1;
        }
        
        .empty-state h3 {
            margin-bottom: 15px;
            color: #666;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #777;
            font-size: 0.9rem;
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 30px;
        }
        
        .pagination button {
            padding: 10px 15px;
            border: 1px solid #ddd;
            background-color: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pagination button:hover {
            background-color: #f5f5f5;
        }
        
        .pagination button.active {
            background-color: #ee4d2d;
            color: white;
            border-color: #ee4d2d;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #333;
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 10000;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        .toast-success {
            background: #4CAF50;
        }
        
        .toast-warning {
            background: #ff9800;
        }
        
        .toast-error {
            background: #f44336;
        }
        
        @media (max-width: 768px) {
            .products-container {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .filters {
                flex-direction: column;
            }
        }
        
        @media (max-width: 480px) {
            .products-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Produtos Shopee - Afiliados</h1>
            <p class="subtitle">Produtos carregados automaticamente da sua <span class="shopee-logo">planilha do Google Sheets</span></p>
            <div class="sheet-info">
                <p><strong>Planilha conectada:</strong> https://docs.google.com/spreadsheets/d/16TTELO5LDp1YZ4cJQk95_dHIHyHw0ZJlJApDXvTGLUI/edit</p>
                <p>Atualize os produtos na planilha e eles aparecer√£o automaticamente aqui!</p>
            </div>
        </header>
        
        <div class="filters">
            <div class="search-box">
                <input type="text" id="searchInput" placeholder="Buscar produtos por nome...">
            </div>
            <div class="category-filter">
                <select id="categoryFilter">
                    <option value="">Todas as categorias</option>
                    <!-- Categorias ser√£o carregadas dinamicamente -->
                </select>
            </div>
        </div>
        
        <div class="stats">
            <div class="product-count" id="productCount">Carregando produtos...</div>
        </div>
        
        <div id="loading" class="loading">
            <p>Carregando produtos da planilha...</p>
        </div>
        
        <div id="productsContainer" class="products-container">
            <!-- Produtos ser√£o carregados aqui -->
        </div>
        
        <div class="pagination" id="pagination">
            <!-- Pagina√ß√£o ser√° adicionada aqui -->
        </div>
        
        <footer>
            <p>Esta p√°gina exibe produtos com links de afiliado da Shopee. Os pre√ßos e disponibilidade podem variar.</p>
            <p>Atualizado automaticamente a partir da planilha do Google Sheets.</p>
        </footer>
    </div>
    
    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <i class="fas fa-info-circle"></i>
        <span id="toastMessage">Mensagem de notifica√ß√£o</span>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const productsContainer = document.getElementById('productsContainer');
            const loadingElement = document.getElementById('loading');
            const searchInput = document.getElementById('searchInput');
            const categoryFilter = document.getElementById('categoryFilter');
            const productCount = document.getElementById('productCount');
            const paginationElement = document.getElementById('pagination');
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            // ID da sua planilha do Google Sheets
            const SHEET_ID = '16TTELO5LDp1YZ4cJQk95_dHIHyHw0ZJlJApDXvTGLUI';
            
            // URL para exportar a planilha como JSON
            const SHEET_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json`;
            
            let allProducts = [];
            let filteredProducts = [];
            let categories = new Set();
            let currentPage = 1;
            const productsPerPage = 12;
            
            // Carregar produtos da planilha
            async function loadProducts() {
                loadingElement.style.display = 'block';
                productsContainer.innerHTML = '';
                
                try {
                    // Usando proxy para evitar problemas de CORS
                    const proxyUrl = 'https://api.allorigins.win/get?url=';
                    const encodedUrl = encodeURIComponent(SHEET_URL);
                    const response = await fetch(proxyUrl + encodedUrl);
                    
                    if (!response.ok) {
                        throw new Error(`Erro ao carregar a planilha: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    
                    // O Google Sheets retorna JSON com um prefixo
                    const jsonStr = data.contents;
                    const startIndex = jsonStr.indexOf('{');
                    const jsonData = JSON.parse(jsonStr.substring(startIndex));
                    
                    parseJSONData(jsonData);
                    
                } catch (error) {
                    console.error('Erro ao carregar produtos:', error);
                    
                    try {
                        // Tentar m√©todo alternativo com CSV
                        const csvUrl = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:csv`;
                        const proxyUrl = 'https://api.allorigins.win/get?url=';
                        const encodedUrl = encodeURIComponent(csvUrl);
                        const response = await fetch(proxyUrl + encodedUrl);
                        
                        if (!response.ok) {
                            throw new Error(`Erro ao carregar a planilha: ${response.status}`);
                        }
                        
                        const data = await response.json();
                        parseCSVData(data.contents);
                        
                    } catch (csvError) {
                        console.error('Erro com m√©todo alternativo:', csvError);
                        showToast('N√£o foi poss√≠vel carregar os produtos da planilha. Verifique se est√° p√∫blica.', 'error');
                        
                        // Carregar dados de exemplo para demonstra√ß√£o
                        loadSampleData();
                    }
                }
            }
            
            // Parse dados CSV
            function parseCSVData(csvText) {
                const rows = csvText.split('\n');
                allProducts = [];
                categories.clear();
                
                // A primeira linha cont√©m os cabe√ßalhos
                const headers = rows[0].split(',').map(header => header.trim().replace(/"/g, ''));
                
                // Encontrar √≠ndices das colunas
                const titleIndex = headers.findIndex(h => h.toLowerCase().includes('titulo') || h.toLowerCase().includes('nome'));
                const imageIndex = headers.findIndex(h => h.toLowerCase().includes('imagem') || h.toLowerCase().includes('foto'));
                const priceIndex = headers.findIndex(h => h.toLowerCase().includes('pre√ßo') || h.toLowerCase().includes('preco') || h.toLowerCase().includes('valor'));
                const categoryIndex = headers.findIndex(h => h.toLowerCase().includes('categoria') || h.toLowerCase().includes('tipo'));
                const linkIndex = headers.findIndex(h => h.toLowerCase().includes('link') || h.toLowerCase().includes('afiliado') || h.toLowerCase().includes('url'));
                
                // Processar cada linha (come√ßando da linha 1 para pular o cabe√ßalho)
                for (let i = 1; i < rows.length; i++) {
                    if (!rows[i].trim()) continue;
                    
                    // Dividir a linha em colunas, tratando v√≠rgulas dentro de aspas
                    const columns = rows[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(col => col.trim().replace(/^"|"$/g, ''));
                    
                    if (columns.length >= 5) {
                        const link = formatShopeeLink(columns[linkIndex] || '#');
                        
                        const product = {
                            title: columns[titleIndex] || 'Produto sem nome',
                            image: columns[imageIndex] || 'https://via.placeholder.com/300x300?text=Produto+Sem+Imagem',
                            price: columns[priceIndex] || 'R$ 0,00',
                            category: columns[categoryIndex] || 'Sem categoria',
                            link: link,
                            originalPrice: columns[5] || '',
                            discount: columns[6] || '',
                            // Armazenar tamb√©m o link original para refer√™ncia
                            rawLink: columns[linkIndex] || '#'
                        };
                        
                        allProducts.push(product);
                        categories.add(product.category);
                    }
                }
                
                // Se n√£o encontrou produtos no CSV, carregar dados de exemplo
                if (allProducts.length === 0) {
                    loadSampleData();
                } else {
                    initializeProductDisplay();
                    showToast(`${allProducts.length} produtos carregados da planilha!`, 'success');
                }
            }
            
            // Parse dados JSON (m√©todo alternativo)
            function parseJSONData(jsonData) {
                allProducts = [];
                categories.clear();
                
                const rows = jsonData.table.rows;
                const headers = jsonData.table.cols.map(col => col.label);
                
                // Encontrar √≠ndices das colunas
                const titleIndex = headers.findIndex(h => h.toLowerCase().includes('titulo') || h.toLowerCase().includes('nome'));
                const imageIndex = headers.findIndex(h => h.toLowerCase().includes('imagem') || h.toLowerCase().includes('foto'));
                const priceIndex = headers.findIndex(h => h.toLowerCase().includes('pre√ßo') || h.toLowerCase().includes('preco') || h.toLowerCase().includes('valor'));
                const categoryIndex = headers.findIndex(h => h.toLowerCase().includes('categoria') || h.toLowerCase().includes('tipo'));
                const linkIndex = headers.findIndex(h => h.toLowerCase().includes('link') || h.toLowerCase().includes('afiliado') || h.toLowerCase().includes('url'));
                
                // Processar cada linha
                for (let i = 0; i < rows.length; i++) {
                    const row = rows[i];
                    const cells = row.c;
                    
                    if (cells && cells.length >= 5) {
                        const link = formatShopeeLink(cells[linkIndex]?.v || '#');
                        
                        const product = {
                            title: cells[titleIndex]?.v || 'Produto sem nome',
                            image: cells[imageIndex]?.v || 'https://via.placeholder.com/300x300?text=Produto+Sem+Imagem',
                            price: cells[priceIndex]?.v || 'R$ 0,00',
                            category: cells[categoryIndex]?.v || 'Sem categoria',
                            link: link,
                            originalPrice: cells[5]?.v || '',
                            discount: cells[6]?.v || '',
                            rawLink: cells[linkIndex]?.v || '#'
                        };
                        
                        allProducts.push(product);
                        categories.add(product.category);
                    }
                }
                
                // Se n√£o encontrou produtos, carregar dados de exemplo
                if (allProducts.length === 0) {
                    loadSampleData();
                } else {
                    initializeProductDisplay();
                    showToast(`${allProducts.length} produtos carregados da planilha!`, 'success');
                }
            }
            
            // FUN√á√ÉO CR√çTICA: Converter links encurtados da Shopee para links funcionais
            function formatShopeeLink(link) {
                if (!link || link === '#' || link.trim() === '') {
                    return '#';
                }
                
                let formattedLink = link.trim();
                
                // Remover espa√ßos em branco
                formattedLink = formattedLink.replace(/\s+/g, '');
                
                // Se j√° for um link completo da Shopee, retornar como est√°
                if (formattedLink.includes('shope.ee/') || formattedLink.includes('shopee.com.br/')) {
                    // Garantir que comece com https://
                    if (!formattedLink.startsWith('http')) {
                        formattedLink = 'https://' + formattedLink;
                    }
                    return formattedLink;
                }
                
                // Se for um link encurtado da Shopee (ex: https://s.shopee.com.br/abc)
                if (formattedLink.includes('s.shopee.com.br/')) {
                    if (!formattedLink.startsWith('http')) {
                        formattedLink = 'https://' + formattedLink;
                    }
                    return formattedLink;
                }
                
                // Se for apenas um c√≥digo (ex: 13r, gJ, 3Bt)
                // Converter para link completo da Shopee
                if (formattedLink.length <= 10 && !formattedLink.includes('/') && !formattedLink.includes('.')) {
                    // Formato: https://shope.ee/{c√≥digo}
                    return `https://shope.ee/${formattedLink}`;
                }
                
                // Se n√£o identificar o formato, retornar como link inativo
                return '#';
            }
            
            // Carregar dados de exemplo (caso a planilha n√£o funcione)
            function loadSampleData() {
                allProducts = [
                    {
                        title: "Conjunto Academia Top Fitness e Legging Cintura Alta Zero",
                        image: "https://down-br.img.susercontent.com/file/br-11134207-7r98o-lq9m81bf1mxj6e",
                        price: "R$ 89,90",
                        originalPrice: "R$ 149,90",
                        discount: "40% OFF",
                        category: "Roupa Feminina",
                        link: "https://shope.ee/13r",
                        rawLink: "13r"
                    },
                    {
                        title: "Bicicleta Ergom√©trica Bluetooth 2.0",
                        image: "https://down-br.img.susercontent.com/file/br-11134207-7r98o-lq9m81bf1n0q46",
                        price: "R$ 1.299,90",
                        originalPrice: "R$ 1.899,90",
                        discount: "32% OFF",
                        category: "Esportes e Lazer",
                        link: "https://shope.ee/gJ",
                        rawLink: "gJ"
                    },
                    {
                        title: "Conjunto Academia Treino Top e Cal√ßa Legging Feminino Fitness Luxo",
                        image: "https://down-br.img.susercontent.com/file/br-11134207-7r98o-lq9m81bf1o1q58",
                        price: "R$ 99,90",
                        originalPrice: "R$ 169,90",
                        discount: "41% OFF",
                        category: "Roupa Feminina",
                        link: "https://shope.ee/3Bt",
                        rawLink: "3Bt"
                    }
                ];
                
                // Adicionar categorias
                allProducts.forEach(product => categories.add(product.category));
                
                initializeProductDisplay();
                showToast("Usando dados de exemplo. Verifique sua planilha.", "warning");
            }
            
            // Inicializar a exibi√ß√£o dos produtos
            function initializeProductDisplay() {
                loadingElement.style.display = 'none';
                
                // Popular o filtro de categorias
                populateCategoryFilter();
                
                // Inicializar produtos filtrados
                filteredProducts = [...allProducts];
                
                // Atualizar contador
                updateProductCount();
                
                // Renderizar produtos
                renderProducts();
                
                // Configurar eventos de filtro
                searchInput.addEventListener('input', filterProducts);
                categoryFilter.addEventListener('change', filterProducts);
            }
            
            // Popular o filtro de categorias
            function populateCategoryFilter() {
                categoryFilter.innerHTML = '<option value="">Todas as categorias</option>';
                
                // Ordenar categorias alfabeticamente
                const sortedCategories = Array.from(categories).sort();
                
                sortedCategories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    categoryFilter.appendChild(option);
                });
            }
            
            // Filtrar produtos
            function filterProducts() {
                const searchTerm = searchInput.value.toLowerCase();
                const selectedCategory = categoryFilter.value;
                
                filteredProducts = allProducts.filter(product => {
                    const matchesSearch = product.title.toLowerCase().includes(searchTerm);
                    const matchesCategory = !selectedCategory || product.category === selectedCategory;
                    
                    return matchesSearch && matchesCategory;
                });
                
                currentPage = 1;
                updateProductCount();
                renderProducts();
            }
            
            // Atualizar contador de produtos
            function updateProductCount() {
                productCount.textContent = `${filteredProducts.length} produto(s) encontrado(s)`;
            }
            
            // Renderizar produtos COM BOT√ïES CLIC√ÅVEIS
            function renderProducts() {
                productsContainer.innerHTML = '';
                
                if (filteredProducts.length === 0) {
                    productsContainer.innerHTML = `
                        <div class="empty-state">
                            <h3>Nenhum produto encontrado</h3>
                            <p>Tente ajustar sua busca ou filtro de categoria.</p>
                        </div>
                    `;
                    paginationElement.innerHTML = '';
                    return;
                }
                
                // Calcular produtos para a p√°gina atual
                const startIndex = (currentPage - 1) * productsPerPage;
                const endIndex = startIndex + productsPerPage;
                const productsToShow = filteredProducts.slice(startIndex, endIndex);
                
                // Renderizar cada produto
                productsToShow.forEach((product, index) => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    
                    // Gerar pre√ßo original se houver
                    const originalPrice = product.originalPrice ? 
                        `<div style="color: #999; font-size: 1rem; text-decoration: line-through; margin-bottom: 5px;">${product.originalPrice}</div>` : '';
                    
                    // Gerar desconto se houver
                    const discountBadge = product.discount ? 
                        `<div style="background: #ffeb3b; color: #333; padding: 4px 10px; border-radius: 6px; font-weight: bold; font-size: 0.9rem; display: inline-block; margin-left: 10px;">${product.discount}</div>` : '';
                    
                    // Criar um bot√£o com evento de clique
                    const buttonHtml = product.link && product.link !== '#' ? 
                        `<button class="affiliate-link" data-link="${product.link}" data-index="${index}">Ver Oferta na Shopee</button>` :
                        `<button class="affiliate-link" disabled>Link Indispon√≠vel</button>`;
                    
                    productCard.innerHTML = `
                        <img src="${product.image}" alt="${product.title}" class="product-image" onerror="this.src='https://via.placeholder.com/300x300?text=Imagem+N√£o+Carregada'">
                        <div class="product-info">
                            <div class="product-category">${product.category}</div>
                            <h3 class="product-title">${product.title}</h3>
                            ${originalPrice}
                            <div class="product-price">${product.price} ${discountBadge}</div>
                            ${buttonHtml}
                        </div>
                    `;
                    
                    productsContainer.appendChild(productCard);
                });
                
                // Adicionar event listeners para os bot√µes ap√≥s renderizar
                addButtonListeners();
                
                // Renderizar pagina√ß√£o
                renderPagination();
            }
            
            // Adicionar event listeners aos bot√µes "Ver Oferta"
            function addButtonListeners() {
                const buttons = document.querySelectorAll('.affiliate-link:not(:disabled)');
                
                buttons.forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        const link = this.getAttribute('data-link');
                        const index = this.getAttribute('data-index');
                        
                        if (link && link !== '#') {
                            // Abrir link em nova aba
                            window.open(link, '_blank', 'noopener,noreferrer');
                            
                            // Mostrar confirma√ß√£o
                            const productTitle = filteredProducts[index]?.title || 'Produto';
                            showToast(`Redirecionando para: ${productTitle}`, 'success');
                        } else {
                            showToast('Link n√£o dispon√≠vel para este produto', 'error');
                        }
                    });
                    
                    // Adicionar estilo de hover via JavaScript tamb√©m
                    button.addEventListener('mouseenter', function() {
                        if (this.getAttribute('data-link') && this.getAttribute('data-link') !== '#') {
                            this.style.cursor = 'pointer';
                            this.style.transform = 'scale(1.02)';
                            this.style.transition = 'transform 0.2s';
                        }
                    });
                    
                    button.addEventListener('mouseleave', function() {
                        this.style.transform = 'scale(1)';
                    });
                });
            }
            
            // Renderizar controles de pagina√ß√£o
            function renderPagination() {
                const totalPages = Math.ceil(filteredProducts.length / productsPerPage);
                
                if (totalPages <= 1) {
                    paginationElement.innerHTML = '';
                    return;
                }
                
                let paginationHTML = '';
                
                // Bot√£o anterior
                if (currentPage > 1) {
                    paginationHTML += `<button onclick="changePage(${currentPage - 1})">Anterior</button>`;
                }
                
                // P√°ginas
                for (let i = 1; i <= totalPages; i++) {
                    if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                        paginationHTML += `<button onclick="changePage(${i})" ${i === currentPage ? 'class="active"' : ''}>${i}</button>`;
                    } else if (i === currentPage - 2 || i === currentPage + 2) {
                        paginationHTML += `<span>...</span>`;
                    }
                }
                
                // Bot√£o pr√≥ximo
                if (currentPage < totalPages) {
                    paginationHTML += `<button onclick="changePage(${currentPage + 1})">Pr√≥xima</button>`;
                }
                
                paginationElement.innerHTML = paginationHTML;
            }
            
            // Mudar de p√°gina
            window.changePage = function(page) {
                currentPage = page;
                renderProducts();
                
                // Rolagem suave para o topo dos produtos
                productsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            };
            
            // Mostrar notifica√ß√£o toast
            function showToast(message, type = 'info') {
                // Adicionar √≠cone Font Awesome se necess√°rio
                if (!document.querySelector('link[href*="font-awesome"]')) {
                    const faLink = document.createElement('link');
                    faLink.rel = 'stylesheet';
                    faLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css';
                    document.head.appendChild(faLink);
                }
                
                toastMessage.textContent = message;
                toast.className = `toast toast-${type}`;
                toast.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i> <span id="toastMessage">${message}</span>`;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }
            
            // Carregar produtos ao iniciar
            loadProducts();
            
            // Recarregar produtos a cada 5 minutos
            setInterval(loadProducts, 5 * 60 * 1000);
            
            // Adicionar bot√£o de atualiza√ß√£o manual (opcional)
            const refreshBtn = document.createElement('button');
            refreshBtn.innerHTML = 'üîÑ Atualizar Agora';
            refreshBtn.style.cssText = `
                background: #4CAF50;
                color: white;
                padding: 8px 16px;
                border: none;
                border-radius: 6px;
                cursor: pointer;
                font-size: 0.9rem;
                margin-left: 10px;
            `;
            refreshBtn.onclick = function() {
                loadProducts();
                showToast('Atualizando produtos...', 'info');
            };
            
            // Adicionar o bot√£o ao lado do contador
            productCount.parentNode.appendChild(refreshBtn);
            
            // Tamb√©m adicionar um listener global para todos os bot√µes "Ver Oferta" via event delegation
            document.addEventListener('click', function(e) {
                if (e.target && e.target.classList.contains('affiliate-link')) {
                    // Prevenir comportamento padr√£o se for um bot√£o
                    e.preventDefault();
                    
                    const link = e.target.getAttribute('data-link');
                    if (link && link !== '#') {
                        window.open(link, '_blank', 'noopener,noreferrer');
                    }
                }
            });
        });
    </script>
</body>
</html>




